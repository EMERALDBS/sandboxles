<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sandbox Game</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #282c34;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            height: 100vh;
        }

        h1 {
            margin: 20px;
        }

        #gameCanvasContainer {
            border: 2px solid white;
        }

        #healthDisplay {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <h1>Welcome to the Sandbox Game!</h1>
    <div id="gameCanvasContainer">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div id="healthDisplay">Health: 100</div>
    </div>
    <script>
        // Setup canvas
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        // Create the player with health
        const player = {
            x: 100,
            y: 100,
            color: 'blue',
            size: 20,
            health: 100 // Player starts with 100 health
        };

        // Create food items
        const foodItems = [
            { x: 400, y: 250, radius: 10, color: 'red', visible: true },
            { x: 500, y: 250, radius: 10, color: 'yellow', visible: true },
        ];

        // Mobile controls
        let moveDirection = { x: 0, y: 0 };

        function startTouch(e) {
            if (e.touches.length > 0) {
                const touch = e.touches[0];
                moveDirection.x = touch.clientX < window.innerWidth / 2 ? -1 : 1; // Left or Right
                moveDirection.y = touch.clientY < window.innerHeight / 2 ? -1 : 1; // Up or Down
            }
        }

        function endTouch() {
            moveDirection.x = 0; // Stop moving
            moveDirection.y = 0; // Stop moving
        }

        // Game loop
        function gameLoop() {
            // Move player based on touch direction
            player.x += moveDirection.x * 2; // Adjust speed if needed
            player.y += moveDirection.y * 2; // Adjust speed if needed

            // Keep the player within the bounds
            player.x = Math.max(0, Math.min(player.x, canvas.width - player.size));
            player.y = Math.max(0, Math.min(player.y, canvas.height - player.size));

            // Decrease health over time
            player.health -= 0.1; // Decrease health slightly each frame
            if (player.health < 0) {
                player.health = 0; // Prevent health from going below 0
            }

            // Clear the canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw player
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.size, player.size);

            // Draw food items
            foodItems.forEach(food => {
                if (food.visible) {
                    ctx.fillStyle = food.color;
                    ctx.beginPath();
                    ctx.arc(food.x, food.y, food.radius, 0, Math.PI * 2);
                    ctx.fill();
                }
            });

            // Check for food collection
            foodItems.forEach(food => {
                if (food.visible && player.x < food.x + food.radius && player.x + player.size > food.x - food.radius &&
                    player.y < food.y + food.radius && player.y + player.size > food.y - food.radius) {
                    player.health += food.color === 'red' ? 20 : 15; // Gain health
                    food.visible = false; // Hide the food after eating
                }
            });

            // Update health display
            document.getElementById("healthDisplay").innerText = "Health: " + Math.round(player.health);
        }

        // Event listeners for touch controls
        window.addEventListener("touchstart", startTouch);
        window.addEventListener("touchend", endTouch);

        // Run the game loop continuously
        setInterval(gameLoop, 16);
    </script>
</body>
</html>
